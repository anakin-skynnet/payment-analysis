import{c as i,j as e,w as o,x as l,y as n,z as m,E as x,H as c,I as t,B as p,J as h,K as u,N as f}from"./index-BtVhH8KW.js";import{R as j}from"./refresh-cw-DLr_UPYn.js";const g=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],_=i("repeat",g),v=a=>f(a),y=[{id:"recurrence",title:"Payment Recurrence",desc:"Scheduled or subscription-based payments (e.g. monthly charges).",icon:l},{id:"retry",title:"Payment Retry (Reattempts)",desc:"Cardholder has a transaction declined and performs a new attempt under the same conditions — same card, amount, and merchant.",icon:j}];function N(){const a=o({params:{limit:50}}),r=a.data?.data??[];return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold font-heading tracking-tight text-foreground",children:"Smart Retry"}),e.jsx("p",{className:"mt-1 text-sm font-medium text-muted-foreground",children:"Recurrence & reattempts · Brazil · Recover more approvals"}),e.jsxs("div",{className:"mt-4 rounded-lg border border-border/80 bg-muted/30 px-4 py-2 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Volume: "}),e.jsx("span",{className:"font-semibold text-foreground",children:"1M+ transactions/month"}),e.jsx("span",{className:"text-muted-foreground",children:" in Brazil (recurrence or retry scenarios)"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-3",children:"Two scenarios in scope"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Smart Retry addresses both recurring payments and one-off retries after a decline."}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:y.map(s=>{const d=s.icon;return e.jsxs(n,{className:"border-border/80",children:[e.jsx(m,{children:e.jsxs(x,{className:"text-base flex items-center gap-2",children:[e.jsx(d,{className:"h-4 w-4 text-primary"}),s.title]})}),e.jsx(c,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:s.desc})})]},s.id)})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-3",children:"Top retry cohorts"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Performance by scenario, decline reason, and attempt number. Success rate, incremental lift vs baseline, and recovered value."}),e.jsx(n,{className:"border-border/80",children:e.jsx(c,{className:"pt-6",children:a.isLoading?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading…"}):a.isError?e.jsx("p",{className:"text-sm text-destructive",children:"Failed to load retry performance."}):r.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No data yet. Run the simulator and ETL to populate views."}):e.jsx("ul",{className:"space-y-4",children:r.map(s=>e.jsxs("li",{className:"rounded-lg border border-border/60 p-3 space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(t,{variant:"secondary",children:[e.jsx(_,{className:"h-3 w-3 mr-1"}),s.retry_scenario]}),e.jsx("span",{className:"font-mono text-sm",children:s.decline_reason_standard}),e.jsxs(t,{variant:"outline",children:["Attempt ",s.retry_count]}),e.jsxs(t,{children:[s.success_rate_pct,"% success"]}),s.incremental_lift_pct!=null&&e.jsxs(t,{variant:s.incremental_lift_pct>0?"default":"destructive",children:[s.incremental_lift_pct>0?"+":"",s.incremental_lift_pct,"% vs baseline"]}),e.jsx(t,{variant:"outline",children:s.effectiveness})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Recovered $",s.recovered_value.toFixed(2)]}),e.jsxs("span",{children:["Avg fraud score ",s.avg_fraud_score.toFixed(3)]}),s.avg_time_since_last_attempt_s!=null&&e.jsxs("span",{children:["Avg wait ",Math.round(s.avg_time_since_last_attempt_s),"s"]}),s.avg_prior_approvals!=null&&e.jsxs("span",{children:["Prior approvals ",s.avg_prior_approvals.toFixed(1)]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(t,{variant:"secondary",children:[s.retry_attempts," retries"]})})]},`${s.retry_scenario}-${s.decline_reason_standard}-${s.retry_count}`))})})}),e.jsxs(p,{variant:"outline",size:"sm",className:"mt-3 gap-2",onClick:()=>v(u("/sql/dashboards/routing_optimization")),children:["Open routing dashboard ",e.jsx(h,{className:"h-3.5 w-3.5"})]})]})]})}const w=()=>e.jsx(N,{});export{w as component};
