import{c as I,j as e,k as T,r as q,av as O,m as l,B as d,J as u,y as n,z as g,E as _,a7 as C,H as i,at as m,Z as L,o as S,h as j,s as R,C as U,ad as B,I as b,aw as F,N as f,ax as H}from"./index-BtVhH8KW.js";import{S as z}from"./sparkles-BQZ-8Oeo.js";import{R as P}from"./rotate-ccw-H9rZNM7b.js";const W=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],K=I("lightbulb",W);const Z=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],M=I("message-square",Z),x=o=>f(o),A={genie:z,model_serving:S,custom_llm:l,ai_gateway:L},$={genie:"bg-purple-500/10 text-purple-700 dark:text-purple-400 border-purple-200 dark:border-purple-800",model_serving:"bg-blue-500/10 text-blue-700 dark:text-blue-400 border-blue-200 dark:border-blue-800",custom_llm:"bg-green-500/10 text-green-700 dark:text-green-400 border-green-200 dark:border-green-800",ai_gateway:"bg-orange-500/10 text-orange-700 dark:text-orange-400 border-orange-200 dark:border-orange-800"},J={approval_optimizer_genie:B,decline_insights_genie:U,approval_propensity_predictor:S,smart_routing_advisor:L,smart_retry_optimizer:P,payment_intelligence_assistant:M,risk_assessment_advisor:R,performance_recommender:K},D=o=>o.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase());function Q(){const{entity:o}=T(),[t,N]=q.useState(void 0),{data:y,isLoading:p,isError:h}=O({params:{entity:o,...t?{agent_type:t}:{}}}),k=y?.data.agents??[],v=y?.data.by_type??{},w=async s=>{try{const{data:a}=await H({agent_id:s});f(a?.url)}catch(a){console.error("Failed to open agent:",a)}},E=async()=>{try{const{data:s}=await F({folder_id:"agents"});f(s?.url)}catch(s){console.error("Failed to open agents folder:",s)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(l,{className:"w-8 h-8 text-primary flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Databricks AI Agents"}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:["Genie, Model Serving, and"," ",e.jsx("a",{href:"https://learn.microsoft.com/en-us/azure/databricks/ai-gateway/",target:"_blank",rel:"noopener noreferrer",className:"underline hover:no-underline",children:"Mosaic AI Gateway"})," ","(LLM) agents. Agent jobs are in agents.yml; run Orchestrator from Setup & Run (step 6); agents use Lakehouse Rules to accelerate approvals."]})]})]}),e.jsxs(d,{variant:"outline",size:"sm",onClick:E,children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Open agents folder in Workspace"]})]})}),e.jsxs(n,{className:"border-primary/20 bg-primary/5 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>x(m()),role:"button",tabIndex:0,onKeyDown:s=>s.key==="Enter"&&x(m()),children:[e.jsxs(g,{children:[e.jsxs(_,{className:"flex items-center gap-2 text-lg",children:[e.jsx(z,{className:"w-5 h-5 text-primary"}),"Ask Data with Genie"]}),e.jsx(C,{children:"Chat with Genie in natural language to explore payment data. Open Genie in Databricks to run these prompts and more."})]}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Sample prompts"}),e.jsxs("ul",{className:"space-y-1.5 text-sm",children:[e.jsx("li",{className:"pl-3 border-l-2 border-muted italic text-muted-foreground",children:"“What was our approval rate by card network last week?”"}),e.jsx("li",{className:"pl-3 border-l-2 border-muted italic text-muted-foreground",children:"“Show me top decline reasons and recovery potential.”"}),e.jsx("li",{className:"pl-3 border-l-2 border-muted italic text-muted-foreground",children:"“Compare 3DS vs non-3DS approval rates by merchant segment.”"})]})]}),e.jsxs(d,{variant:"default",onClick:s=>{s.stopPropagation(),x(m())},children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Open Genie to chat",e.jsx(u,{className:"w-3 h-3 ml-2"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Data is fetched from your Databricks workspace when you use Genie. Ensure backend and Databricks (catalog, schema, warehouse) are configured for connectivity and data access."})]})]}),e.jsx(n,{className:"border-muted cursor-pointer hover:shadow-md transition-shadow",onClick:()=>x(m()),role:"button",tabIndex:0,onKeyDown:s=>s.key==="Enter"&&x(m()),children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(l,{className:"w-5 h-5 text-muted-foreground mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Leverage Databricks AI capabilities to optimize payment approval rates"}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1 ml-4 list-disc",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Genie:"})," Ask questions in natural language to explore payment data"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Model Serving:"})," Real-time ML predictions for routing and retry optimization"]}),e.jsxs("li",{children:[e.jsx("strong",{children:e.jsx("a",{href:"https://learn.microsoft.com/en-us/azure/databricks/ai-gateway/",target:"_blank",rel:"noopener noreferrer",className:"underline hover:no-underline",onClick:s=>s.stopPropagation(),children:"Mosaic AI Gateway"})}),": LLM-powered insights and recommendations (Llama 3.1 70B)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Custom Agents:"})," Domain-specific payment intelligence"]})]})]})]})})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(d,{variant:t===void 0?"default":"outline",size:"sm",onClick:()=>N(void 0),children:[e.jsx(l,{className:"w-4 h-4 mr-2"}),"All Agents (",Object.values(v).reduce((s,a)=>s+a,0),")"]}),Object.entries(v).map(([s,a])=>{const c=A[s];return e.jsxs(d,{variant:t===s?"default":"outline",size:"sm",onClick:()=>N(s),children:[c&&e.jsx(c,{className:"w-4 h-4 mr-2"}),D(s)," (",a,")"]},s)})]}),h&&e.jsx(n,{className:"border-destructive/50 bg-destructive/5",children:e.jsx(i,{className:"py-8 text-center",children:e.jsx("p",{className:"text-destructive font-medium",children:"Failed to load agents. Check that the backend is running."})})}),p&&e.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:[1,2,3,4].map(s=>e.jsxs(n,{children:[e.jsxs(g,{children:[e.jsx(j,{className:"h-6 w-3/4"}),e.jsx(j,{className:"h-4 w-full"})]}),e.jsx(i,{children:e.jsx(j,{className:"h-20 w-full"})})]},s))}),!p&&!h&&e.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:k.map(s=>{const a=J[s.id]||l,c=A[s.agent_type],G=$[s.agent_type];return e.jsxs(n,{className:"hover:shadow-lg transition-shadow cursor-pointer group",onClick:()=>w(s.id),children:[e.jsxs(g,{children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(a,{className:"w-5 h-5 text-primary flex-shrink-0"}),e.jsx(_,{className:"text-lg",children:s.name})]}),e.jsxs(b,{variant:"outline",className:`${G} flex-shrink-0`,children:[c&&e.jsx(c,{className:"w-3 h-3 mr-1"}),D(s.agent_type)]})]}),e.jsx(C,{className:"text-sm leading-relaxed mt-2",children:s.description})]}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Use Case"}),e.jsx("p",{className:"text-sm",children:s.use_case})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Databricks Resource"}),e.jsx("code",{className:"text-xs bg-muted px-2 py-1 rounded block font-mono break-all",children:s.databricks_resource})]}),s.capabilities&&s.capabilities.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Capabilities"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.capabilities.slice(0,3).map(r=>e.jsx(b,{variant:"secondary",className:"text-xs",children:r.replace(/_/g," ")},r)),s.capabilities.length>3&&e.jsxs(b,{variant:"secondary",className:"text-xs",children:["+",s.capabilities.length-3," more"]})]})]}),s.example_queries&&s.example_queries.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Example Queries"}),e.jsxs("div",{className:"space-y-1",children:[s.example_queries.slice(0,2).map(r=>e.jsxs("p",{className:"text-xs italic text-muted-foreground pl-3 border-l-2 border-muted",children:["“",r,"”"]},r)),s.example_queries.length>2&&e.jsxs("p",{className:"text-xs text-muted-foreground pl-3",children:["+",s.example_queries.length-2," more examples"]})]})]}),e.jsxs(d,{variant:"ghost",size:"sm",className:"w-full group-hover:bg-primary/10",onClick:r=>{r.stopPropagation(),w(s.id)},children:["Open in Databricks",e.jsx(u,{className:"w-4 h-4 ml-2"})]})]})]},s.id)})}),!p&&!h&&k.length===0&&e.jsx(n,{children:e.jsxs(i,{className:"py-12 text-center",children:[e.jsx(l,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No agents found for this filter"})]})})]})}const ee=()=>e.jsx(Q,{});export{ee as component};
