import{j as e,U as f,r as m,V as v,ae as k,X as C,af as b,B as r,J as i,n as w,y as h,z as j,E as p,H as I,N as o,K as g,I as x}from"./index-CxQcrJOo.js";import{I as u}from"./input-B4Jz6yEC.js";import{T as D}from"./triangle-alert-Bofq0thS.js";const q=async s=>{try{const a=await(await fetch(`/api/notebooks/notebooks/${s}/url`)).json();o(a?.url)}catch(t){console.error("Failed to open notebook:",t)}},T=()=>{o(g("/sql/dashboards/realtime_monitoring"))};function _(){const s=f(),[t,a]=m.useState("mid_failure"),[c,y]=m.useState("MID=demo"),N=v({queryKey:["incidents"],queryFn:()=>k()}),l=C({mutationFn:()=>b({category:t,key:c,severity:"medium",details:{}}),onSuccess:()=>s.invalidateQueries({queryKey:["incidents"]})}),d=N.data?.data??[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Incidents"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{variant:"outline",size:"sm",onClick:T,children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Monitoring Dashboard",e.jsx(i,{className:"w-3 h-3 ml-2"})]}),e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>q("realtime_pipeline"),children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Alert Pipeline",e.jsx(i,{className:"w-3 h-3 ml-2"})]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Track and manage payment processing incidents and alerts"})]}),e.jsxs(h,{children:[e.jsx(j,{children:e.jsx(p,{children:"Create incident"})}),e.jsxs(I,{className:"grid gap-2 md:grid-cols-3",children:[e.jsx(u,{value:t,onChange:n=>a(n.target.value)}),e.jsx(u,{value:c,onChange:n=>y(n.target.value)}),e.jsx(r,{onClick:()=>l.mutate(),disabled:l.isPending,children:"Create"})]})]}),e.jsx("div",{className:"space-y-3",children:d.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No incidents yet."}):d.map(n=>e.jsx(E,{inc:n},n.id))})]})}const A="/sql/dashboards/realtime_monitoring";function E({inc:s}){const t=()=>{const a=g(A);o(a)};return e.jsx(h,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:t,role:"button",tabIndex:0,onKeyDown:a=>a.key==="Enter"&&t(),children:e.jsxs(j,{className:"py-4",children:[e.jsxs(p,{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"truncate",children:[s.category," â€” ",s.key]}),e.jsx("div",{className:"text-xs text-muted-foreground font-mono truncate",children:s.id})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(x,{variant:"secondary",children:s.severity}),e.jsx(x,{variant:s.status==="open"?"default":"secondary",children:s.status}),e.jsx(i,{className:"h-4 w-4 text-muted-foreground shrink-0","aria-hidden":!0})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Click to open Real-Time Monitoring in Databricks"})]})})}const S=()=>e.jsx(_,{});export{S as component};
